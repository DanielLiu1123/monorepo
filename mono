#!/usr/bin/env bash

# Monorepo Build System - Entry Point
# This is a convenient wrapper around scripts/build/main.sh
#
# Install shell completion:
#   source ./scripts/build/completion.sh
#
# Usage:
#   ./mono <command> [path]
#
# Most commands accept an optional [path] parameter (defaults to current directory).
# Only 'run' command requires a specific project path.
#
# Examples:
#   ./mono build                        # Build all projects
#   ./mono build services/              # Build all projects in services/
#   ./mono run services/order-service   # Run specific service
#   ./mono gen-proto                    # Generate proto files
#   ./mono test .                       # Test all projects

set -e

# Get the directory where this script is located (monorepo root)
MONO_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Path to the main build script
BUILD_SCRIPT="$MONO_ROOT/scripts/build/main.sh"

# Check if build script exists
if [ ! -f "$BUILD_SCRIPT" ]; then
    echo "Error: Build script not found at $BUILD_SCRIPT"
    exit 1
fi

# Proxy all arguments to the main build script
exec "$BUILD_SCRIPT" "$@"
